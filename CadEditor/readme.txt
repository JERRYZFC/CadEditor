-------------------------------------------------------------------------------
[RUS]
Редактор уровней для игры Chip and Dale[NES]
Версия 0.5b
-------------------------------------------------------------------------------

Редактируемый файл должен называться Chip 'n Dale Rescue Rangers (U) [!].nes и лежать в той же папке, что и редактор.

Управление: 

  Редактор экрана.
    Левая панель - выбор активного объекта.
    Screen no - выбор экрана для редактирования. Некоторые экраны (185-256) используются для хранения данных об объектах, поэтому их редактировать нельзя.
    View as и Door - выбор, с помощью какого блока видеопамяти просматривать экран (смотреть можно с помощью любого блока видеопамяти, но лучше выбирать тот, который будет реально использоваться в игре).
    View type - просмотр обычных тайлов или карты проходимости уровня.
    Edit tiles - открыть редактор макротайлов.
    Edit objs  - открыть редактор тайлов.
    Edit layout - открыть редактор формы уровня.
    Edit enemies - открыть редактор врагов.
    Save - сохранить результат в файл (сохраняются сразу все отредактированные экраны).
    
  Редактор макротайлов
    Select tileset - выбор редактируемого набора макротайлов (наборы могут быть общими для нескольких уровней / дверей).
    View with level / door - выбор, с помощью какой видеопамяти просматривать макротайлы. Для правильного редактирования нужно выбирать правильный набор.
      
  Редактор тайлов 
    Level - выбор уровня (* объекты могут быть общие для нескольких уровней, как и у макротайлов)
    Door  - выбор с помощью какой видеопамяти просматривать тайлы.
    View with subpallete - выбор с помощью какой части палитры просматривать выбранный блок видеопамяти.
    
  Редактор формы уровня
    Левая панель - выбор активного элемента редактирования (экрана, скролла или двери).
    Центральная панель - щелчок по синей стрелке разворачивает направление сортировки объектов на заданном этаже (если используется скролл влево или в обе стороны, надо не забывать правильно указывать направление).
    Правая панель - просмотр порядка экранов, как они будут идти в игре.
    Make preview - самая важная кнопка :) Позволяет проверить правильность построения уровня. При нажатии на нее рассчитается порядок экранов, как они будут идти в игре и выбранные набора видеопамяти и палитры с учетов всех дверей переключателей. По мини-копиям экранов можно убедиться в том, что они отрисовались правильно.
    Edit level params - открыть редактор свойств дверей и уровней.
    
  Редактор свойств дверей/уровней
    Select level - выбрать уровень или дверь для редактирования свойств.
    Objects/ Back Graphic Bank No - выбор используемого номера блока видеопамяти.
    Palette No, Palette 2 No - выбор основной и запасной палитры (запасная используется для окраски некоторых объектов типа вжика и рокки и для блинка экрана).
    Palette blink byte - байт, задающий мерцание (точно не знаю, как именно).
    Start screen index - номер первого экрана в раскладке (экраны нумеруются по порядку слева направо, сверху вниз).
      Например для первого уровня раскладка выглядит так:
        layout @ 1E2D3: (level 1)
        1E2D3:
        16 17 18 19 1A 1B 00 <- inside area 00
        0F 10 11 12 13 14 15
        0E 00 00 00 1D 00 1C <- boss entrance 12
        08 09 0A 0B 0C 0D 00
        00 00 00 00 00 07 00
        01 02 03 04 05 06 00
      информация отсюда : http://acmlm.no-ip.org/board/thread.php?id=5821
      
      Стартовая комната - 01, она имеет индекс 23 в раскладке. Стартовые комнаты для уровней должны быть в нижнем левом углу, для дверей могут быть любыми.
      
    Layout width, Layout height - размеры раскладки по длине и ширине. Нельзя увеличивать общую площадь и высоту!!! (площадь из-за того, что перетрутся соседние данные, высоту из-за того же, так как кроме раскладки есть еще специальные байты направления для каждого этажа уровня и они в оригинальном роме расположены вплотную к описаниям объектов).
    Layout address, Scroll doors address, Stage direction address - адреса раскладки, данных о скролле и данных о направлении движения по этажам. Пока только для чтения.
    Big block id - номер "архитектуры" - набора из больших и малых тайлов, из которых будут строиться экраны уровня.
    Music no - номер трека на уровне.
    Start screen X, Start screen Y - нужно указывать правильные координаты стартовых позиций для дверей, иначе враги после входа в дверь перестанут появляться!!! Координаты меряются справа налево и сверху вниз (для примера расладки первого уровня координаты самой первой комнаты будут X=0, Y=5).
    Player X, Player Y - стартовое положение бурундука на новом экране при переходе в дверь.
    
  Редактор врагов
    Select level - выбор уровня для редактирования.
    Screen No - выбор игрового экрана. Стрелки позволяют проматывать уровень в любом направлении. Экраны отрисовываются уже с рассчитанной правильной видеопамятью (вычисляется исходя набора дверей на уровне и скроллов). Если при отрисовке происходят ошибки, надо правильно настроить форму уровня и свойства дверей в редакторе формы. Враги сортируются редактором в момент сохранения в таком порядке, чтобы они правильно появлялись в игре (в зависимости от формы уровня, дверей и направлений - всё это настраивается в редакторе формы уровня). (!!!) из-за хака разработчиков на уровне D объекты невозможно правильно отсортировать. В текущей версии редактора НЕЛЬЗЯ редактировать врагов на этом уровне. Это возможно только в версии 0.4.
    Правая панель - просмотр врагов (координат, номера экрана, на котором враг появляется и типа врага). Кнопка Delete на клавиатуре - удаление выбранных врагов. Кнопка Clear all objects at screen - очищение всех врагов на выбранном экране.
  
    
!!! Рекомендуется копировать файл с промежуточным результатом в отдельную папку и проверять на работоспособность почаще!

v0.2
- исправил порядок последних экранов на первом уровне.
- исправил мелкий баг считавания - теперь можно добавлять во вторые части уровня на один объект больше :)
- добавил экран последнего босса
- добавил картинки объектов
- улучшения панели объектов - добавлены картинки и возможность выделять несколько объектов для удаления на панели объектов (зажимая CONTROL или SHIFT)
- сделал редактор блоков (кнопка edit tiles)
- предложение сохраниться при выходе.
- !!! выходной файл при сохранении называется также как и входной теперь. Не забывайте делать бекапы этого файла!!!)

v0.3
- графика (видеопамять, описание объектов, палитра) берется из ROM. Теперь можно открывать хаки с измененной графикой.
- редактор объектов - возможность составлять объекты из тайлов видеопамяти, задавать им палитру и тип в игре.
- предложение сохраниться при переходе в субредактор.
- добавлена сортировка объектов на экране слева направо (при обратном скролле справа налево).

v0.4
- исправлен баг неправильного удаления объекта.
- возможность тонкой настройки координат объекта.
- просмотр карты проходимости уровня.

v0.5b
- структуры данных в редакторе соответствуют тому, как они устроены в игре, практически все адреса и указатели считываются из ROM.
- редактор формы уровня (бета-версия):
  - в целях оптимизации экраны прорисовываются только в момент нажатия на кнопку preview. 
  - простая защита от построения зацикленных уровней.
  - условная графика дверей и скроллов:
- редактор параметров уровней/дверей (бета-версия):
  - необходимость вручную указывать номера комнат для перехода.
  - нет защиты от случайного ввода неправильных значених размеров уровня.
  - нет защиты от неправильно направленной двери (из-за ограничений движка двери на одной высоте могут вести только в комнату левее исходной).
  - редактирование номера музыкального трека на уровне :)
- редактор врагов:
  - автоматическая сортировка порядка появления врагов на уровне (не работает на уровне D, из-за хака с боссом)
  - просмотр уровня в том виде и форме, в каком он будет в игре.
- улучшения редактора экрана:
  - возможность просматривать экран с любой заданной видеопамятью.
  - упрощение редактирования стыков (дорисовываются соседний экраны).
  - отделен от редактора врагов.
  - просмотр номеров-типов объектов
- тайлы и макротайлы можно смотреть с любой выбранной видеопамятью.


Благодарности: 
  evgeny - идеи по развитию редактора, тестирование.
  Lomax  - тестирование.
  Roket  - тестирование, рисование иконок.

Обратная связь: sanya.boyko@gmail.com